TODO ?
Enlever les generation d'id sur les createDtos








POST projectUsers  ROLE ADMIN RETOUR

AppController (e2e) › route › project-users › Post project-users/  › should return 201 admin

    assert.fail(received, expected)

    Message:
      Response doesn't match with JSON schema - [
      {
        "keywordLocation": "#/required",
        "instanceLocation": "#/project"
      }
    ]


type: 'object',
properties: {
  id: {
    type: 'string',
  },
  startDate: {
    type: 'string',
  },
  endDate: {
    type: 'string',
  },
  userId: {
    type: 'string',
  },
  user: {
    type: 'object',
    properties: {
      id: {
        type: 'string',
      },
      username: {
        type: 'string',
      },
      email: {
        type: 'string',
      },
      role: {
        type: 'string',
      },
    },
    required: ['username', 'email', 'id', 'role'],
    additionalProperties: false,
  },
  projectId: {
    type: 'string',
  },
  project: {
    type: 'object',
    properties: {
      id: {
        type: 'string',
      },
      name: {
        type: 'string',
      },
      referringEmployeeId: {
        type: 'string',
      },
      referringEmployee: {
        type: 'object',
        properties: {
          id: {
            type: 'string',
          },
          username: {
            type: 'string',
          },
          email: {
            type: 'string',
          },
          role: {
            type: 'string',
          },
        },
        required: ['username', 'email', 'id', 'role'],
        additionalProperties: false,
      },
    },
    required: [
      'name',
      'id',
      'referringEmployeeId',
      'referringEmployee',
    ],
    additionalProperties: false,
  },
},
required: [
  'startDate',
  'endDate',
  'userId',
  'projectId',
  'id',
  'user',
  'project',
],
additionalProperties: false,
});

AVEC INSERTION POST PROJECTUSER ROLE :
   projects
          Post projects/
            √ should throw error because no access token (6 ms)
            √ should return 401 with user role (167 ms)
            √ should return 401 with project manager role (150 ms)
            √ should return 201 with project and referring Employee  (266 ms)
            √ should return 401 if referringEmployee is not at least manager  (229 ms)
          Get projects/
            √ should throw error because no access token (2 ms)
            × should return 200 with only project with user in with projects user role (250 ms)
            √ should return 200 with projects manager role (271 ms)
            √ should return 200 with projects admin role  (274 ms)
          Get projects/:id
            √ should throw error because no access token (14 ms)
            √ should throw 404 error because project not found (240 ms)
            × should return ForbiddenException because user not in the project with user role (223 ms)
            × should return 200 with project user role (573 ms)
            √ should return 200 with project manager role (218 ms)
            √ should return 200 with project admin role  (238 ms)
        project-users
          Get project-users/:id
            √ should throw error because no access token (519 ms)
            √ should throw 404 NotFoundException if user not in project (657 ms)
            √ should return 200 with projects manager role (771 ms)
            √ should return 200 with projects admin role  (759 ms)
          Get project-users
            √ should throw error because no access token (725 ms)
            √ should throw 200 (992 ms)
            √ should return 200 for user but with no project-users (913 ms)
            × should return 200 for user but with only his project-users (1350 ms)
            √ should return 200 with project manager role (1062 ms)
            √ should return 200 with project admin role  (1066 ms)
          Post project-users/
            √ should throw error because no access token (404 ms)
            √ should return 401 UnauthorizedException with user role (582 ms)
            × should return 404 NotFoundException with project not found (721 ms)
            × should return 404 NotFoundException with user not found (648 ms)
            × should return 201 admin (601 ms)
            √ should return 201 manager (607 ms)
            × should return 409 ConflictException if user already on a project on the same date range (848 ms)
            × should return 409 ConflictException if user already on a project on the same date range 2  (871 ms)
            × should return 409 ConflictException if user already on a project on the same date range 3 (935 ms)
            × should return 409 ConflictException if user already on a project on the same date range 4 (884 ms)
            × should return 409 ConflictException if user already on a project on the same date range 5 (1012 ms)